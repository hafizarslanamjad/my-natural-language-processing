<!DOCTYPE html>
<html>
    <head>
        <title>Bag of Words Tutorial</title>
        <style>
            body {font-family: Aerial, sans-serif; margin: 20px}
            h2 {color: #2c3e50}
            pre {background: #f4f4f4, padding: 10px, border-radius:5px;}
            .section {margin-bottom: 40px}
        </style>
        <script src="https://polyfill.io/v3/polyfill.min.js?features=es6"></script>
        <script id="MathJax-script"
                async
                src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js"></script>
    </head>
    <body>
        <h1>Bag of Words (BoW) Tutorial</h1>
        <!-- Section 1: Intro-->
        <div class="section">
            <h2>2. Mathematical Formulation</h2>
            <p>
                A sentence <i>S</i> consisting of words \( (w_1, w_2, \dots, w_n) \) is mapped into a vector:
            </p>
            <pre>
                S = (w1, w2, ..., wn) ↦ v(S) ∈ ℝ^|V|
            </pre>
            <p>Example If vocabulary V = {I, was, lured, conned} and S =  "I was conned", then:</p>
            <pre>
                v(S) = [count(I), count(was), count(lured), count(conned)]
            </pre>
        </div>
        <!--Section 3: Programming-->
        <div class="section">
            <h2>3.Programming in Python</h2>
            <p>
                Using <code>scikit-learn</code> CountVectorizer:
            </p>
            <pre>
                <code class="language-python">
                    from sklearn.feature_extractor.text import CountVectorizer

                    sentences = ["I was lured", "I was conned"]
                    vectorizer = CountVectorizer
                    vectors = vectorizer.fit_transform(sentences)
                    
                    print(vectorizer.get_featur_names_out())
                    print(vectors.toarray())
                </code>
            </pre>
        </div>
        <!--Section 4: Interactive Demo-->
        <div class="section">
            <h2>Try it to Yourself!</h2>
            <form method="post">
                {% csrf_token %}
                <input type="text" name="sentence1" placeholder="Sentence 1" required>
                <br>
                <br>
                <input type="text" name="sentence2" placeholder="Sentence 2" required>
                <br>
                <br>
                <button type="submit">Compare</button>
            </form>
            {% if result %}
                <div style="margin-top:20px;
                            padding:10px;
                            border:1px solid #ccc;
                            background:#f9f9f9">
                    <h3>Result: {{ result }}</h3>
                </div>
            {% endif %}
            {% if table %}
                <h3>Bag-of-Words Vectors</h3>
                <table border="1" cellpadding="5" cellspacing="0">
                    <tr>
                        <th>Word</th>
                        <th>Sentence 1 Count</th>
                        <th>Sentence 2 Count</th>
                    </tr>
                    {% for row in table %}
                        <tr>
                            <td>{{ row.Word }}</td>
                            <td>{{ row.s1 }}</td>
                            <td>{{ row.s2 }}</td>
                        </tr>
                    {% endfor %}
                </table>
            {% endif %}
            {% if chart %}
                <h3>Visualization</h3>
                <img src="data:image/png;base64,{{ chart }}" alt="BoW Chart">
            {% endif %}
        </div>
    </body>
</html>
